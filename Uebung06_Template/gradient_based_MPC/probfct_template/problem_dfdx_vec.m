function out = problem_dfdx_vec(x, u, vec, p)
%PROBLEM_DFDX_VEC Product of transposed Jacobi matrix and vector (df / dx)' * vec
% 	out = [0 1 0 0 0 0 0 0 0 0;
%            0 0 0 0 0 0 0 0 0 0;
%            0 0 0 1 0 0 0 0 0 0;
%            0 0 0 0 0 0 0 0 0 0;
%            0 0 0 0 0 1 0 0 0 0;
%            0 0 0 0 0 0 0 0 0 0;
%            0 0 0 0 0 0 0 1 0 0;
%            0 0 0 0 1/(x(5)^2*cos(x(9)))*(9.8*sin(x(7))+u(1)*cos(x(7))+2*x(8)*(x(6)*cos(x(9))))-1/(x(5)^2*cos(x(9)))*(-2*x(5)*x(8)*x(10)*sin(x(9))) -1/x(5)*2*x(8) -1/(x(5)*cos(x(9)))*(9.8*cos(x(7))-u(1)*sin(x(7))) -1/(x(5)*cos(x(9)))*(2*x(6)*cos(x(9))-2*x(5)*x(10)*sin(x(9))) 2*x(8)*x(10)/(cos(x(9)))^2-sin(x(9))/(x(5)*cos(x(9))^2)*(9.8*sin(x(7))+u(1)*cos(x(7))) -1/(x(5)*cos(x(9)))*(-2*x(8)*x(5)*sin(x(9)));
%            0 0 0 0 0 0 0 0 0 1;
%            0 0 0 0 1/(x(5)^2)*(2*x(6)*x(10)+sin(x(9))*(9.8*cos(x(7))-u(1)*sin(x(7)))-u(2)*cos(x(9))+x(5)*x(8)^2*sin(x(9))*cos(x(9)))-1/x(5)*(x(8)^2*sin(x(9))*cos(x(9))) -1/x(5)*2*x(10) -1/x(5)*(sin(x(9))*(-9.8*sin(x(7))-u(1)*cos(x(7)))) -1/x(5)*(2*x(5)*x(8)*sin(x(9))*cos(x(9))) -1/x(5)*(cos(x(9))*(9.8*cos(x(7))-u(1)*sin(x(7)))+u(2)*sin(x(9))+x(5)*x(8)^2*(cos(x(9))^2-sin(x(9))^2)) -1/x(5)*(2*x(6))];
%     out = out'*vec;
    out(1) = 0;
    out(2) = vec(1);
    out(3) = 0;
    out(4) = vec(3);
    out(5) = vec(8) * (1/(x(5)^2*cos(x(9)))*(9.8*sin(x(7))+u(1)*cos(x(7))+2*x(8)*(x(6)*cos(x(9))))-1/(x(5)^2*cos(x(9)))*(-2*x(5)*x(8)*x(10)*sin(x(9)))) + vec(10) * (1/(x(5)^2)*(2*x(6)*x(10)+sin(x(9))*(9.8*cos(x(7))-u(1)*sin(x(7)))-u(2)*cos(x(9))+x(5)*x(8)^2*sin(x(9))*cos(x(9)))-1/x(5)*(x(8)^2*sin(x(9))*cos(x(9))));
    out(6) = vec(5) + vec(8) * (-1/x(5)*2*x(8)) + vec(10) * (-1/x(5)*2*x(10));
    out(7) = vec(8) * (-1/(x(5)*cos(x(9)))*(9.8*cos(x(7))-u(1)*sin(x(7)))) + vec(10) * (-1/x(5)*(sin(x(9))*(-9.8*sin(x(7))-u(1)*cos(x(7)))));
    out(8) = vec(7) + vec(8) * (-1/(x(5)*cos(x(9)))*(2*x(6)*cos(x(9))-2*x(5)*x(10)*sin(x(9)))) + vec(10) * (-1/x(5)*(2*x(5)*x(8)*sin(x(9))*cos(x(9))));
    out(9) = vec(8) * (2*x(8)*x(10)/(cos(x(9)))^2-sin(x(9))/(x(5)*cos(x(9))^2)*(9.8*sin(x(7))+u(1)*cos(x(7)))) + vec(10) * (-1/x(5)*(cos(x(9))*(9.8*cos(x(7))-u(1)*sin(x(7)))+u(2)*sin(x(9))+x(5)*x(8)^2*(cos(x(9))^2-sin(x(9))^2)));
    out(10) = vec(8) * (-1/(x(5)*cos(x(9)))*(-2*x(8)*x(5)*sin(x(9)))) + vec(9) + vec(10) * (-1/x(5)*(2*x(6)));
end
